{"version":3,"sources":["webpack:///src/base/listview/listview.vue","webpack:///./src/base/listview/listview.vue?c8cf","webpack:///./src/base/listview/listview.vue","webpack:///src/components/singer/singer.vue","webpack:///./src/components/singer/singer.vue?0c58","webpack:///./src/components/singer/singer.vue","webpack:///./src/api/singer.js"],"names":["listview","Array","Scroll","scroll_scroll","Loading","loading","item","pageY","anchorIndex","delta","refresh","y","index","listGroup","height","i","clientHeight","_this","this","_calculateHeight","listHeight","newY","fixedTop","listview_listview","render","_vm","_h","$createElement","_c","_self","ref","staticClass","attrs","data","listenScroll","probeType","on","scroll","_l","group","key","id","refInFor","_v","_s","title","click","$event","selectItem","directives","name","rawName","value","expression","touchstart","onShortcutTouchStart","touchmove","stopPropagation","preventDefault","onShortcutTouchMove","class","current","currentIndex","data-index","fixedTitle","length","staticRenderFns","base_listview_listview","__webpack_require__","normalizeComponent","ssrContext","_getSingerList","ListView","methods","extends_default","bottom","singer","list","Fsinger_mid","Fsinger_name","Findex","val","ret","components_singer_singer","singers","select","selectSinger","singer_Component","singer_normalizeComponent","singer_singer","__webpack_exports__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default","__WEBPACK_IMPORTED_MODULE_2__config__","channel","page","pagesize","pagenum","hostUin","needNewCode","platform","g_tk","Object","__WEBPACK_IMPORTED_MODULE_1_common_js_jsonp__","singerId","order","begin","num","songstatus","singermid"],"mappings":"wMAiDAA,qBAIAC,yFAOA,oCAGA,mCAIA,eACA,QAEA,gBAGAC,OAAAC,EAAA,EAEAC,QAAAC,EAAA,uDAGAC,gEAIA,qBAEA,mBACAC,6BAEAC,iBACAA,oDAGA,mBACAD,0CA7CA,GAgDA,qCAEAE,iBACAD,2CAGAE,6CAIAC,4CASA,wDAEA,iCAEAC,+DAEA,qEAKAC,YACA,uBACAC,8BACA,MACAC,GACAC,kCACAF,6BAMA,IAAAG,EAAAC,6BAEAC,oBACA,oCAGAC,oCAGA,oCAIA,SACAL,SACA,sBAMA,yBAJAA,mBAEAM,8BAMA,oBACA,kCAnHA,QAuHA,oCAIAC,qDACAA,EAAA,uGAeA,kDAKA,mEAEA,MC/LAC,GADiBC,OAFjB,WAA0B,IAAAC,EAAAP,KAAaQ,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,UAAoBE,IAAA,WAAAC,YAAA,WAAAC,OAA6CC,KAAAR,EAAAQ,KAAAC,aAAAT,EAAAS,aAAAC,UAAAV,EAAAU,WAA0EC,IAAKC,OAAAZ,EAAAY,UAAqBT,EAAA,KAAAH,EAAAa,GAAAb,EAAA,cAAAc,GAA4C,OAAAX,EAAA,MAAgBY,IAAAD,EAAAE,GAAAX,IAAA,YAAAY,UAAA,EAAAX,YAAA,eAAoEH,EAAA,MAAWG,YAAA,qBAA+BN,EAAAkB,GAAAlB,EAAAmB,GAAAL,EAAAM,UAAApB,EAAAkB,GAAA,KAAAf,EAAA,KAAAH,EAAAa,GAAAC,EAAA,eAAAjC,GAAwF,OAAAsB,EAAA,MAAgBY,IAAAlC,EAAAmC,GAAAV,YAAA,kBAAAK,IAA8CU,MAAA,SAAAC,GAAyBtB,EAAAuB,WAAA1C,OAAuBsB,EAAA,OAAYqB,aAAaC,KAAA,OAAAC,QAAA,SAAAC,MAAA9C,EAAA,OAAA+C,WAAA,gBAA0EtB,YAAA,WAAuBN,EAAAkB,GAAA,KAAAf,EAAA,QAAyBG,YAAA,SAAmBN,EAAAkB,GAAAlB,EAAAmB,GAAAtC,EAAA4C,mBAAqCzB,EAAAkB,GAAA,KAAAf,EAAA,OAAyBG,YAAA,gBAAAK,IAAgCkB,WAAA7B,EAAA8B,qBAAAC,UAAA,SAAAT,GAAoH,OAAjDA,EAAAU,kBAAyBV,EAAAW,iBAAwBjC,EAAAkC,oBAAAZ,OAAyCnB,EAAA,KAAAH,EAAAa,GAAAb,EAAA,sBAAAnB,EAAAM,GAAyD,OAAAgB,EAAA,MAAgBY,IAAAlC,EAAAmC,GAAAV,YAAA,OAAA6B,OAAsCC,QAAApC,EAAAqC,eAAAlD,GAAsCoB,OAAQ+B,aAAAnD,KAAoBa,EAAAkB,GAAA,qBAAAlB,EAAAmB,GAAAtC,GAAA,yBAA+DmB,EAAAkB,GAAA,KAAAf,EAAA,OAA2BqB,aAAaC,KAAA,OAAAC,QAAA,SAAAC,MAAA3B,EAAA,WAAA4B,WAAA,eAA4EvB,IAAA,QAAAC,YAAA,eAAuCH,EAAA,MAAWG,YAAA,gBAA0BN,EAAAkB,GAAAlB,EAAAmB,GAAAnB,EAAAuC,iBAAAvC,EAAAkB,GAAA,KAAAf,EAAA,OAA2DqB,aAAaC,KAAA,OAAAC,QAAA,SAAAC,OAAA3B,EAAAQ,KAAAgC,OAAAZ,WAAA,iBAAgFtB,YAAA,sBAAkCH,EAAA,kBAExmDsC,oBCCjB,IAuBAC,EAvBAC,EAAA,OAcAC,CACArE,EACAuB,GATA,EAVA,SAAA+C,GACAF,EAAA,SAaA,KAEA,MAUA,yCCLA,+DAOAG,8BAIAC,SAAAL,GACAM,QAAAC,wDAEA,kCACAC,kBAEAjE,yEAMA+B,oBAEAmC,8BAEA,IAAA3D,EAAAC,uFAGA2D,yDAnCA,0CAGA,mCA+CAC,mBAEAC,wBAGAC,0BAGAxC,2CAKAsC,mBAEAC,+CAOA,SACAvC,GAzEA,sBA2EAyC,qCAEAA,+EAKA,cAEAC,4BAOA,iBCxGAC,GADiB3D,OAFjB,WAA0B,IAAaE,EAAbR,KAAaS,eAA0BC,EAAvCV,KAAuCW,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,IAAA,SAAAC,YAAA,WAAkCH,EAAA,aAAkBE,IAAA,OAAAE,OAAkBC,KAAtJf,KAAsJkE,SAAmBhD,IAAKiD,OAA9KnE,KAA8KoE,gBAA9KpE,KAAyMyB,GAAA,KAAAf,EAAA,oBAElNsC,oBCCjB,IAcAqB,EAdAnB,EAAA,OAcAoB,CACAC,EACAN,GATA,EAVA,SAAAb,GACAF,EAAA,SAaA,KAEA,MAUAsB,EAAA,QAAAH,EAAA,wECvBO,WACH,IACMtD,EAAO0D,OAAkBC,EAAA,GAC3BC,QAAS,SACTC,KAAM,OACNtD,IAAK,cACLuD,SAAU,IACVC,QAAS,EACTC,QAAS,EACTC,YAAa,EACbC,SAAU,MACVC,KAAM,aAEV,OAAOC,OAAAC,EAAA,EAAAD,CAZK,uCAYMpE,EAAM2D,EAAA,QAGrB,SAA0BW,GAC7B,IACMtE,EAAO0D,OAAkBC,EAAA,GAC7BK,QAAS,EACTC,YAAa,EACbC,SAAU,MACVK,MAAO,SACPC,MAAO,EACPC,IAAK,GACLC,WAAY,EACZP,KAAM,WACNQ,UAAWL,IAEb,OAAOF,OAAAC,EAAA,EAAAD,CAZK,2DAYMpE,EAAM2D,EAAA","file":"static/js/1.68f6873ceab028c415fe.js","sourcesContent":["<template>\r\n    <scroll class=\"listview\"\r\n            :data=\"data\"\r\n            ref=\"listview\"\r\n            :listenScroll=\"listenScroll\"\r\n            @scroll=\"scroll\"\r\n            :probeType=\"probeType\">\r\n        <!-- 列表 -->\r\n        <ul>\r\n            <li v-for=\"group in data\" class=\"list-group\" :key=\"group.id\" ref=\"listGroup\">\r\n                <h2 class=\"list-group-title\">{{group.title}}</h2>\r\n                <ul>\r\n                    <li @click=\"selectItem(item)\" v-for=\"item in group.items\" class=\"list-group-item\" :key=\"item.id\">\r\n                        <img v-lazy=\"item.avatar\" class=\"avatar\">\r\n                        <span class=\"name\">{{item.name}}</span>\r\n                    </li>\r\n                </ul>\r\n            </li>\r\n        </ul>\r\n        <!-- 快速导航 -->\r\n        <div class=\"list-shortcut\" @touchstart=\"onShortcutTouchStart\" @touchmove.stop.prevent=\"onShortcutTouchMove\">\r\n            <ul>\r\n                <li v-for=\"(item,index) in shortcutList\"\r\n                class=\"item\"\r\n                :key=\"item.id\"\r\n                :class=\"{'current': currentIndex === index}\"\r\n                :data-index=\"index\"\r\n                >\r\n                    {{item}}\r\n                </li>\r\n            </ul>\r\n        </div>\r\n        <!-- 列表title -->\r\n        <div class=\"list-fixed\" v-show=\"fixedTitle\" ref=\"fixed\">\r\n            <h1 class=\"fixed-title\">{{fixedTitle}}</h1>\r\n        </div>\r\n        <div v-show=\"!data.length\" class=\"loading-container\">\r\n            <loading></loading>\r\n        </div>\r\n    </scroll>\r\n</template>\r\n\r\n<script type=\"text/ecmascript-6\">\r\n    import Scroll from '../scroll/scroll';\r\n    import {getData} from '../../common/js/dom';\r\n    import Loading from '../loading/loading';\r\n    // 获取元素定义时的高度\r\n    const ANCHOR_HRIGHT = 18;\r\n    const TITLE_HEIGHT = 30;\r\n    export default {\r\n        props: {\r\n            data: {\r\n                type: Array,\r\n                default: function () { return []; }\r\n            }\r\n        },\r\n        created () {\r\n            this.touch = {};\r\n            // 将这个listenScroll传递给scroll组件\r\n            this.listenScroll = true;\r\n            this.listHeight = [];\r\n            // 如果要监听实时滚动(scroll组件默认为1，如果为1，当手离开以后的滚动就无法检测)\r\n            this.probeType = 3;\r\n        },\r\n        data () {\r\n            return {\r\n                scrollY: -1,\r\n                currentIndex: 0,\r\n                diff: -1\r\n            };\r\n        },\r\n        components: {\r\n            Scroll,\r\n            Loading\r\n        },\r\n        methods: {\r\n            selectItem (item) {\r\n                this.$emit('select', item);\r\n            },\r\n            onShortcutTouchStart (e) {\r\n                // 获取当前被点击元素的索引\r\n                let anchorIndex = getData(e.target, 'index');\r\n                // 获取第一个触碰的手指的信息\r\n                let firstTouch = e.touches[0];\r\n                this.touch.y1 = firstTouch.pageY;\r\n                // 记录第一次点击的dom索引\r\n                this.touch.anchorIndex = anchorIndex;\r\n                this._scrollTo(anchorIndex);\r\n            },\r\n            onShortcutTouchMove (e) {\r\n                let firstTouch = e.touches[0];\r\n                this.touch.y2 = firstTouch.pageY;\r\n                // 获取手指滑动时y轴上面的偏移,然后除以每个元素的高度，那么得到经过的dom数；\r\n                // |0相当于Math.floor(),向下取整；\r\n                let delta = (this.touch.y2 - this.touch.y1) / ANCHOR_HRIGHT | 0;\r\n                // 获取到手指滑动到的地方的索引\r\n                let anchorIndex = parseInt(this.touch.anchorIndex) + delta;\r\n                this._scrollTo(anchorIndex);\r\n            },\r\n            refresh () {\r\n                this.$refs.listview.refresh();\r\n            },\r\n            scroll (pos) {\r\n                // 获取滚动的y方向的距离\r\n                this.scrollY = pos.y;\r\n            },\r\n            _scrollTo (index) {\r\n                // 处理导航栏上下多余地方的点击\r\n                if (!index && (index !== 0)) {\r\n                    return;\r\n                }\r\n                // 处理滑动的时候超出边界的情况\r\n                if (index < 0) {\r\n                    index = 0;\r\n                } else if (index > this.listHeight.length - 2) {\r\n                    index = this.listHeight.length - 2;\r\n                }\r\n                this.scrollY = -this.listHeight[index];\r\n                // 第一个参数是dom，第二个参数是动画时间\r\n                this.$refs.listview.scrollToElement(this.$refs.listGroup[index], 0);\r\n            },\r\n            // 计算每个group的高度\r\n            _calculateHeight () {\r\n                this.listHeight = [];\r\n                const list = this.$refs.listGroup;\r\n                let height = 0;\r\n                this.listHeight.push(height);\r\n                for (let i = 0; i < list.length; i++) {\r\n                    let item = list[i];\r\n                    height += item.clientHeight;\r\n                    this.listHeight.push(height);\r\n                }\r\n            }\r\n        },\r\n        watch: {\r\n            // 当数据发生变化时，就计算group的高度\r\n            data () {\r\n                setTimeout(() => {\r\n                    this._calculateHeight();\r\n                }, 20);\r\n            },\r\n            scrollY (newY) {\r\n                const listHeight = this.listHeight;\r\n                // 当滚动到顶部，newY>0\r\n                if (newY > 0) {\r\n                    this.currentIndex = 0;\r\n                    return;\r\n                }\r\n                // 在中间部分滚动\r\n                for (let i = 0; i < listHeight.length - 1; i++) {\r\n                    let height1 = listHeight[i];\r\n                    let height2 = listHeight[i + 1];\r\n                    if (!height2 || (-newY >= height1 && -newY < height2)) {\r\n                        this.currentIndex = i;\r\n                        // 列表title的偏移值\r\n                        this.diff = height2 + newY;\r\n                        // console.log(this.diff);\r\n                        return;\r\n                    }\r\n                }\r\n                // 当滚动到底部，且-newY大于最后一个元素的上限\r\n                this.currentIndex = listHeight.length - 2;\r\n                this.currentIndex = 0;\r\n            },\r\n            diff (newVal) {\r\n                // console.log(111);\r\n                let fixedTop = (newVal > 0 && newVal < TITLE_HEIGHT) ? newVal - TITLE_HEIGHT : 0;\r\n                if (this.fixedTop === fixedTop) {\r\n                    return;\r\n                }\r\n                this.fixedTop = fixedTop;\r\n                this.$refs.fixed.style.transform = `translate3d(0, ${fixedTop}px, 0)`;\r\n            }\r\n            // diff(newVal) {\r\n            //     let fixedTop = (newVal > 0 && newVal < TITLE_HEIGHT) ? newVal - TITLE_HEIGHT : 0\r\n            //     if (this.fixedTop === fixedTop) {\r\n            //         return;\r\n            //     }\r\n            //     this.fixedTop = fixedTop;\r\n            //     this.$refs.fixed.style.transform = `translate3d(0,${fixedTop}px,0)`;\r\n            // }\r\n        },\r\n        computed: {\r\n            // title的集合数组\r\n            shortcutList () {\r\n                return this.data.map((group) => {\r\n                    return group.title.substr(0, 1);\r\n                });\r\n            },\r\n            fixedTitle () {\r\n                if (this.scrollY > 0) {\r\n                    return '';\r\n                }\r\n                return this.data[this.currentIndex] ? this.data[this.currentIndex].title : '';\r\n            }\r\n        }\r\n    };\r\n</script>\r\n\r\n<style lang=\"less\" rel=\"stylesheet/less\">\r\n    @import \"../../common/less/variable\";\r\n    .listview {\r\n        position: relative;\r\n        width: 100%;\r\n        height: 100%;\r\n        overflow: hidden;\r\n        background: @color-background;\r\n        .list-group {\r\n            padding-bottom: 30px;\r\n            .list-group-title {\r\n                height: 30px;\r\n                line-height: 30px;\r\n                padding-left: 20px;\r\n                font-size: @font-size-small;\r\n                color: @color-text-l;\r\n                background: @color-highlight-background;\r\n            }\r\n            .list-group-item {\r\n                display: flex;\r\n                align-items: center;\r\n                padding: 20px 0 0 30px;\r\n                .avatar {\r\n                    width: 50px;\r\n                    height: 50px;\r\n                    border-radius: 50%;\r\n                }\r\n                .name {\r\n                    margin-left: 20px;\r\n                    color: @color-text-l;\r\n                    font-size: @font-size-medium;\r\n                }\r\n            }\r\n        }\r\n        .list-shortcut {\r\n            position: absolute;\r\n            z-index: 30;\r\n            right: 0;\r\n            top: 50%;\r\n            transform: translateY(-50%);\r\n            width: 20px;\r\n            padding: 20px 0;\r\n            border-radius: 10px;\r\n            text-align: center;\r\n            background: @color-background-d;\r\n            font-family: Helvetica;\r\n            .item {\r\n                padding: 3px;\r\n                line-height: 1;\r\n                color: @color-text-l;\r\n                font-size: @font-size-small;\r\n                &.current {\r\n                    color: @color-theme;\r\n                }\r\n            }\r\n        }\r\n        .list-fixed {\r\n            position: absolute;\r\n            top: 0;\r\n            left: 0;\r\n            width: 100%;\r\n            .fixed-title {\r\n                height: 30px;\r\n                line-height: 30px;\r\n                padding-left: 20px;\r\n                font-size: @font-size-small;\r\n                color: @color-text-l;\r\n                background: @color-highlight-background;\r\n            }\r\n        }\r\n        .loading-container {\r\n            position: absolute;\r\n            width: 100%;\r\n            top: 50%;\r\n            transform: translateY(-50%);\r\n        }\r\n    }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/base/listview/listview.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('scroll',{ref:\"listview\",staticClass:\"listview\",attrs:{\"data\":_vm.data,\"listenScroll\":_vm.listenScroll,\"probeType\":_vm.probeType},on:{\"scroll\":_vm.scroll}},[_c('ul',_vm._l((_vm.data),function(group){return _c('li',{key:group.id,ref:\"listGroup\",refInFor:true,staticClass:\"list-group\"},[_c('h2',{staticClass:\"list-group-title\"},[_vm._v(_vm._s(group.title))]),_vm._v(\" \"),_c('ul',_vm._l((group.items),function(item){return _c('li',{key:item.id,staticClass:\"list-group-item\",on:{\"click\":function($event){_vm.selectItem(item)}}},[_c('img',{directives:[{name:\"lazy\",rawName:\"v-lazy\",value:(item.avatar),expression:\"item.avatar\"}],staticClass:\"avatar\"}),_vm._v(\" \"),_c('span',{staticClass:\"name\"},[_vm._v(_vm._s(item.name))])])}))])})),_vm._v(\" \"),_c('div',{staticClass:\"list-shortcut\",on:{\"touchstart\":_vm.onShortcutTouchStart,\"touchmove\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.onShortcutTouchMove($event)}}},[_c('ul',_vm._l((_vm.shortcutList),function(item,index){return _c('li',{key:item.id,staticClass:\"item\",class:{'current': _vm.currentIndex === index},attrs:{\"data-index\":index}},[_vm._v(\"\\n                \"+_vm._s(item)+\"\\n            \")])}))]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.fixedTitle),expression:\"fixedTitle\"}],ref:\"fixed\",staticClass:\"list-fixed\"},[_c('h1',{staticClass:\"fixed-title\"},[_vm._v(_vm._s(_vm.fixedTitle))])]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.data.length),expression:\"!data.length\"}],staticClass:\"loading-container\"},[_c('loading')],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-5da7b4a2\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/base/listview/listview.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-5da7b4a2\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./listview.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./listview.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./listview.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5da7b4a2\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./listview.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/base/listview/listview.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div class=\"singer\" ref=\"singer\">\r\n      <list-view @select=\"selectSinger\" :data=\"singers\" ref=\"list\"></list-view>\r\n      <!-- 挂载子路由 -->\r\n      <router-view></router-view>\r\n  </div>\r\n</template>\r\n\r\n<script type=\"text/ecmascript-6\">\r\nimport {getSingerList} from '../../api/singer';\r\nimport {ERR_OK} from '../../api/config';\r\nimport Singer from '../../common/js/singer';\r\nimport ListView from '../../base/listview/listview';\r\nimport {mapMutations} from 'vuex';\r\nimport {playlistMixin} from 'common/js/mixin';\r\n\r\nconst HOT_NAME = '热门';\r\nconst HOT_SINGER_LENGTH = 10;\r\n\r\n  export default {\r\n    mixins: [playlistMixin],\r\n    data () {\r\n      return {\r\n        singers: []\r\n      };\r\n    },\r\n    created () {\r\n      this._getSingerList();\r\n    },\r\n    components: {\r\n      ListView\r\n    },\r\n    methods: {\r\n      handlePlaylist (playlist) {\r\n        const bottom = playlist.length > 0 ? '60px' : '';\r\n        this.$refs.singer.style.bottom = bottom;\r\n        // 嗲用list-view的refresh()\r\n        this.$refs.list.refresh();\r\n      },\r\n      selectSinger (singer) {\r\n        // 实现路由跳转的另外一种方法，与<router-link>等价\r\n        this.$router.push({\r\n          path: `/singer/${singer.id}`\r\n        });\r\n        // 进行提交\r\n        this.setSinger(singer);\r\n      },\r\n      _getSingerList () {\r\n        getSingerList().then((res) => {\r\n          if (res.code === ERR_OK) {\r\n            this.singers = this._normalizeSinger(res.data.list);\r\n          }\r\n        });\r\n      },\r\n      _normalizeSinger (list) {\r\n        let map = {\r\n          hot: {\r\n            title: HOT_NAME,\r\n            items: []\r\n          }\r\n        };\r\n        list.forEach((item, index) => {\r\n          // 将前面10条热门仿造hot属性里面\r\n          if (index < HOT_SINGER_LENGTH) {\r\n            map.hot.items.push(new Singer({\r\n              id: item.Fsinger_mid,\r\n              name: item.Fsinger_name\r\n            }));\r\n          }\r\n          // 以字母名字作为key，将所有对应的元素放到这个数组里面\r\n          const key = item.Findex;\r\n          if (!map[key]) {\r\n            map[key] = {\r\n              title: key,\r\n              items: []\r\n            };\r\n          }\r\n          map[key].items.push(new Singer({\r\n            id: item.Fsinger_mid,\r\n            name: item.Fsinger_name\r\n          }));\r\n        });\r\n        // return map;\r\n        // 为了得到有序列表，需要处理map\r\n        // console.log(map);\r\n        let hot = [];\r\n        let ret = [];\r\n        for (let key in map) {\r\n          let val = map[key];\r\n          if (val.title === HOT_NAME) {\r\n            hot.push(val);\r\n          } else if (val.title.match(/[a-zA-Z]/)) {\r\n            ret.push(val);\r\n          }\r\n        }\r\n        // 对ret数组里面的对象进行排序\r\n        ret.sort((a, b) => {\r\n          return a.title.charCodeAt(0) - b.title.charCodeAt(0);\r\n        });\r\n        return hot.concat(ret);\r\n      },\r\n      // 这是一个辅助函数\r\n      ...mapMutations({\r\n        // 进行映射\r\n        setSinger: 'SET_SINGER'\r\n      })\r\n    }\r\n  };\r\n</script>\r\n\r\n<style lang=\"less\" rel=\"stylesheet/less\">\r\n  .singer {\r\n    position: fixed;\r\n    top: 88px;\r\n    bottom: 0;\r\n    width: 100%;\r\n  }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/singer/singer.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"singer\",staticClass:\"singer\"},[_c('list-view',{ref:\"list\",attrs:{\"data\":_vm.singers},on:{\"select\":_vm.selectSinger}}),_vm._v(\" \"),_c('router-view')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-3c2e1771\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/singer/singer.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-3c2e1771\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./singer.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./singer.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./singer.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3c2e1771\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./singer.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/singer/singer.vue\n// module id = null\n// module chunks = ","import jsonp from 'common/js/jsonp';\r\nimport {commonParams, options} from './config';\r\n\r\nexport function getSingerList () {\r\n    const url = 'https://c.y.qq.com/v8/fcg-bin/v8.fcg';\r\n    const data = Object.assign({}, commonParams, {\r\n        channel: 'singer',\r\n        page: 'list',\r\n        key: 'all_all_all',\r\n        pagesize: 100,\r\n        pagenum: 1,\r\n        hostUin: 0,\r\n        needNewCode: 0,\r\n        platform: 'yqq',\r\n        g_tk: 1664029744\r\n    });\r\n    return jsonp(url, data, options);\r\n}\r\n\r\nexport function getSingerDetail (singerId) {\r\n    const url = 'https://c.y.qq.com/v8/fcg-bin/fcg_v8_singer_track_cp.fcg';\r\n    const data = Object.assign({}, commonParams, {\r\n      hostUin: 0,\r\n      needNewCode: 0,\r\n      platform: 'yqq',\r\n      order: 'listen',\r\n      begin: 0,\r\n      num: 80,\r\n      songstatus: 1,\r\n      g_tk: 1664029744,\r\n      singermid: singerId\r\n    });\r\n    return jsonp(url, data, options);\r\n  }\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/singer.js"],"sourceRoot":""}